# Cloudflare Pages 正确配置

## 问题原因
Cloudflare Pages 默认使用了错误的部署命令 `npx wrangler deploy`，这个命令不适合 Next.js 项目。

## 解决方案

### 在 Cloudflare Pages 控制台修改配置：

1. 进入你的 Cloudflare Pages 项目
2. 点击 **Settings** → **Builds & deployments**
3. 找到 **Build configuration** 部分
4. 点击 **Edit configuration**

### 正确的配置：

```
Framework preset: Next.js (Static HTML Export)
或者选择: None (手动配置)

Build command: npm run build
Build output directory: .next
Root directory: / (留空)

Environment variables:
NODE_VERSION=18
```

### 重要：删除自定义部署命令

如果有 **Deploy command** 字段，请**删除或留空**，不要使用 `npx wrangler deploy`

---

## 方法二：使用静态导出（推荐，更简单）

如果上面的方法还有问题，可以将 Next.js 导出为静态网站：

### 1. 修改 next.config.js

在项目根目录的 `next.config.js` 中添加：

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export',  // 添加这一行
  reactStrictMode: true,
  images: {
    unoptimized: true,  // 静态导出需要这个
  },
  env: {
    SITE_NAME: 'C315实验室',
    SITE_URL: 'https://你的域名.pages.dev',
  },
}

module.exports = nextConfig
```

### 2. 修改 Cloudflare Pages 配置

```
Framework preset: Next.js (Static HTML Export)

Build command: npm run build
Build output directory: out

Environment variables:
NODE_VERSION=18
```

### 3. 推送代码并重新部署

```bash
git add .
git commit -m "配置静态导出"
git push origin main
```

---

## 方法三：使用 Vercel（最简单）

如果 Cloudflare Pages 配置太复杂，可以改用 Vercel：

### 优点：
- ✅ 原生支持 Next.js
- ✅ 零配置
- ✅ 自动部署

### 步骤：
1. 访问 https://vercel.com
2. 用 GitHub 登录
3. 导入仓库
4. 点击 Deploy
5. 完成！

---

## 推荐方案

### 对于 C315 项目，我推荐：

**方案 A：静态导出 + Cloudflare Pages**
- 修改 `next.config.js` 添加 `output: 'export'`
- 国内访问速度好

**方案 B：直接使用 Vercel**
- 最简单，零配置
- 虽然国内稍慢，但稳定可靠

---

## 下一步操作

请选择一个方案：

1. **修改 next.config.js 使用静态导出**（推荐）
2. **改用 Vercel 部署**（最简单）
3. **在 Cloudflare Pages 控制台修改配置**

告诉我你想用哪个方案，我来帮你完成！
